{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/subscribes.js)\r\n * Version: 21.2.4\r\n * Build date: Mon Dec 06 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { isPlainObject } from \"../../core/utils/type\";\nimport dateUtils from \"../../core/utils/date\";\nimport { each } from \"../../core/utils/iterator\";\nimport { extend } from \"../../core/utils/extend\";\nimport { AGENDA_LAST_IN_DATE_APPOINTMENT_CLASS } from \"./classes\";\nimport { utils } from \"./utils\";\nimport { getTimeZoneCalculator } from \"./instanceFactory\";\nimport { createAppointmentAdapter } from \"./appointmentAdapter\";\nimport { getFormatType, formatDates } from \"./appointments/textUtils\";\nvar toMs = dateUtils.dateToMilliseconds;\nvar subscribes = {\n  isCurrentViewAgenda: function () {\n    return \"agenda\" === this.option(\"currentView\");\n  },\n  currentViewUpdated: function (currentView) {\n    this.option(\"currentView\", currentView);\n  },\n  currentDateUpdated: function (date) {\n    this.option(\"currentDate\", date);\n  },\n  getOption: function (name) {\n    return this.option(name);\n  },\n  getWorkspaceOption: function (name) {\n    return this.getWorkSpace().option(name);\n  },\n  isVirtualScrolling: function () {\n    return this.isVirtualScrolling();\n  },\n  setCellDataCacheAlias: function (appointment, geometry) {\n    this._workSpace.setCellDataCacheAlias(appointment, geometry);\n  },\n  isGroupedByDate: function () {\n    return this.getWorkSpace().isGroupedByDate();\n  },\n  showAppointmentTooltip: function (options) {\n    var targetedAppointment = this.getTargetedAppointment(options.data, options.target);\n    this.showAppointmentTooltip(options.data, options.target, targetedAppointment);\n  },\n  hideAppointmentTooltip: function () {\n    this.hideAppointmentTooltip();\n  },\n  showEditAppointmentPopup: function (options) {\n    var targetedData = this.getTargetedAppointment(options.data, options.target);\n    this.showAppointmentPopup(options.data, false, targetedData);\n  },\n  updateAppointmentAfterResize: function (options) {\n    var info = utils.dataAccessors.getAppointmentInfo(options.$appointment);\n    var exceptionDate = info.sourceAppointment.exceptionDate;\n\n    this._checkRecurringAppointment(options.target, options.data, exceptionDate, function () {\n      this._updateAppointment(options.target, options.data, function () {\n        this._appointments.moveAppointmentBack();\n      });\n    }.bind(this));\n  },\n  getUpdatedData: function (rawAppointment) {\n    return this._getUpdatedData(rawAppointment);\n  },\n  updateAppointmentAfterDrag: function (_ref) {\n    var {\n      event: event,\n      element: element,\n      rawAppointment: rawAppointment,\n      coordinates: coordinates\n    } = _ref;\n    var info = utils.dataAccessors.getAppointmentInfo(element);\n    var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, getTimeZoneCalculator(this.key));\n    var targetedAppointment = createAppointmentAdapter(extend({}, rawAppointment, this._getUpdatedData(rawAppointment)), this._dataAccessors, getTimeZoneCalculator(this.key));\n    var targetedRawAppointment = targetedAppointment.source();\n\n    var newCellIndex = this._workSpace.getDroppableCellIndex();\n\n    var oldCellIndex = this._workSpace.getCellIndexByCoordinates(coordinates);\n\n    var becomeAllDay = targetedAppointment.allDay;\n    var wasAllDay = appointment.allDay;\n    var movedBetweenAllDayAndSimple = this._workSpace.supportAllDayRow() && (wasAllDay && !becomeAllDay || !wasAllDay && becomeAllDay);\n\n    if (newCellIndex !== oldCellIndex || movedBetweenAllDayAndSimple) {\n      this._checkRecurringAppointment(rawAppointment, targetedRawAppointment, info.sourceAppointment.exceptionDate, function () {\n        this._updateAppointment(rawAppointment, targetedRawAppointment, function () {\n          this._appointments.moveAppointmentBack(event);\n        }, event);\n      }.bind(this), void 0, void 0, event);\n    } else {\n      this._appointments.moveAppointmentBack(event);\n    }\n  },\n  onDeleteButtonPress: function (options) {\n    var targetedData = this.getTargetedAppointment(options.data, $(options.target));\n    this.checkAndDeleteAppointment(options.data, targetedData);\n    this.hideAppointmentTooltip();\n  },\n\n  getTextAndFormatDate(appointmentRaw, targetedAppointmentRaw, format) {\n    var appointmentAdapter = createAppointmentAdapter(appointmentRaw, this._dataAccessors, getTimeZoneCalculator(this.key));\n    var targetedAdapter = createAppointmentAdapter(targetedAppointmentRaw || appointmentRaw, this._dataAccessors, getTimeZoneCalculator(this.key));\n    var timeZoneCalculator = getTimeZoneCalculator(this.key);\n    var startDate = timeZoneCalculator.createDate(targetedAdapter.startDate, {\n      path: \"toGrid\"\n    });\n    var endDate = timeZoneCalculator.createDate(targetedAdapter.endDate, {\n      path: \"toGrid\"\n    });\n    var formatType = format || getFormatType(startDate, endDate, targetedAdapter.allDay, \"month\" !== this.option(\"currentView\"));\n    return {\n      text: targetedAdapter.text || appointmentAdapter.text,\n      formatDate: formatDates(startDate, endDate, formatType)\n    };\n  },\n\n  _createAppointmentTitle(data) {\n    if (isPlainObject(data)) {\n      return data.text;\n    }\n\n    return String(data);\n  },\n\n  getResizableAppointmentArea: function (options) {\n    var allDay = options.allDay;\n\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    if (groups && groups.length) {\n      if (allDay || this.getLayoutManager().getRenderingStrategyInstance()._needHorizontalGroupBounds()) {\n        var horizontalGroupBounds = this._workSpace.getGroupBounds(options.coordinates);\n\n        return {\n          left: horizontalGroupBounds.left,\n          right: horizontalGroupBounds.right,\n          top: 0,\n          bottom: 0\n        };\n      }\n\n      if (this.getLayoutManager().getRenderingStrategyInstance()._needVerticalGroupBounds(allDay) && this._workSpace._isVerticalGroupedWorkSpace()) {\n        var verticalGroupBounds = this._workSpace.getGroupBounds(options.coordinates);\n\n        return {\n          left: 0,\n          right: 0,\n          top: verticalGroupBounds.top,\n          bottom: verticalGroupBounds.bottom\n        };\n      }\n    }\n  },\n  needRecalculateResizableArea: function () {\n    return this.getWorkSpace().needRecalculateResizableArea();\n  },\n  getAppointmentGeometry: function (settings) {\n    return this.getLayoutManager().getRenderingStrategyInstance().getAppointmentGeometry(settings);\n  },\n  isAllDay: function (appointmentData) {\n    return this.getLayoutManager().getRenderingStrategyInstance().isAllDay(appointmentData);\n  },\n  getDeltaTime: function (e, initialSize, itemData) {\n    return this.getLayoutManager().getRenderingStrategyInstance().getDeltaTime(e, initialSize, itemData);\n  },\n  getDropDownAppointmentWidth: function (isAllDay) {\n    return this.getLayoutManager().getRenderingStrategyInstance().getDropDownAppointmentWidth(this._getViewCountConfig().intervalCount, isAllDay);\n  },\n  getDropDownAppointmentHeight: function () {\n    return this.getLayoutManager().getRenderingStrategyInstance().getDropDownAppointmentHeight();\n  },\n  getCellWidth: function () {\n    return this.getWorkSpace().getCellWidth();\n  },\n  getCellHeight: function () {\n    return this.getWorkSpace().getCellHeight();\n  },\n  getMaxAppointmentCountPerCellByType: function (isAllDay) {\n    return this.getRenderingStrategyInstance()._getMaxAppointmentCountPerCellByType(isAllDay);\n  },\n  needCorrectAppointmentDates: function () {\n    return this.getRenderingStrategyInstance().needCorrectAppointmentDates();\n  },\n  getRenderingStrategyDirection: function () {\n    return this.getRenderingStrategyInstance().getDirection();\n  },\n  updateAppointmentStartDate: function (options) {\n    var appointment = options.appointment;\n\n    var firstViewDate = this._workSpace.getStartViewDate();\n\n    var startDate = new Date(options.startDate);\n\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n    var updatedStartDate;\n\n    if (this.appointmentTakesAllDay(appointment)) {\n      updatedStartDate = dateUtils.normalizeDate(startDate, firstViewDate);\n    } else {\n      if (startDate < firstViewDate) {\n        startDate = firstViewDate;\n      }\n\n      updatedStartDate = dateUtils.normalizeDate(options.startDate, new Date(startDate));\n    }\n\n    return dateUtils.roundDateByStartDayHour(updatedStartDate, startDayHour);\n  },\n  updateAppointmentEndDate: function (options) {\n    var endDate = options.endDate;\n\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n    var updatedEndDate = endDate;\n\n    if (endDate.getHours() >= endDayHour) {\n      updatedEndDate.setHours(endDayHour, 0, 0, 0);\n    } else if (!options.isSameDate && startDayHour > 0 && 60 * endDate.getHours() + endDate.getMinutes() < 60 * startDayHour) {\n      updatedEndDate = new Date(updatedEndDate.getTime() - toMs(\"day\"));\n      updatedEndDate.setHours(endDayHour, 0, 0, 0);\n    }\n\n    return updatedEndDate;\n  },\n  renderCompactAppointments: function (options) {\n    this._compactAppointmentsHelper.render(options);\n  },\n  clearCompactAppointments: function () {\n    this._compactAppointmentsHelper.clear();\n  },\n  supportCompactDropDownAppointments: function () {\n    return this.getLayoutManager().getRenderingStrategyInstance().supportCompactDropDownAppointments();\n  },\n  getGroupCount: function () {\n    return this._workSpace._getGroupCount();\n  },\n  mapAppointmentFields: function (config) {\n    var {\n      itemData: itemData,\n      itemElement: itemElement,\n      targetedAppointment: targetedAppointment\n    } = config;\n    var targetedData = targetedAppointment || this.getTargetedAppointment(itemData, itemElement);\n    return {\n      appointmentData: config.itemData,\n      appointmentElement: config.itemElement,\n      targetedAppointmentData: targetedData\n    };\n  },\n  dayHasAppointment: function (day, appointment, trimTime) {\n    return this.dayHasAppointment(day, appointment, trimTime);\n  },\n  getLayoutManager: function () {\n    return this._layoutManager;\n  },\n  getAgendaVerticalStepHeight: function () {\n    return this.getWorkSpace().getAgendaVerticalStepHeight();\n  },\n  getAgendaDuration: function () {\n    return this._getCurrentViewOption(\"agendaDuration\");\n  },\n  getStartViewDate: function () {\n    return this.getStartViewDate();\n  },\n  getEndViewDate: function () {\n    return this.getEndViewDate();\n  },\n  forceMaxAppointmentPerCell: function () {\n    return this.forceMaxAppointmentPerCell();\n  },\n  onAgendaReady: function (rows) {\n    var $appts = this.getAppointmentsInstance()._itemElements();\n\n    var total = 0;\n\n    var applyClass = function (_, count) {\n      var index = count + total - 1;\n      $appts.eq(index).addClass(AGENDA_LAST_IN_DATE_APPOINTMENT_CLASS);\n      total += count;\n    };\n\n    for (var i = 0; i < rows.length; i++) {\n      each(rows[i], applyClass);\n    }\n  },\n  getTimezone: function () {\n    return this._getTimezoneOffsetByOption();\n  },\n  getTargetedAppointmentData: function (appointment, element) {\n    return this.getTargetedAppointment(appointment, element);\n  },\n  getEndDayHour: function () {\n    return this._workSpace.option(\"endDayHour\") || this.option(\"endDayHour\");\n  },\n  getStartDayHour: function () {\n    return this._workSpace.option(\"startDayHour\") || this.option(\"startDayHour\");\n  },\n  isAdaptive: function () {\n    return this.option(\"adaptivityEnabled\");\n  },\n  removeDroppableCellClass: function () {\n    this._workSpace.removeDroppableCellClass();\n  }\n};\nexport default subscribes;","map":{"version":3,"sources":["/Users/fatmaamara/Desktop/projetetude/authentification-main/front-end/node_modules/devextreme/esm/ui/scheduler/subscribes.js"],"names":["$","isPlainObject","dateUtils","each","extend","AGENDA_LAST_IN_DATE_APPOINTMENT_CLASS","utils","getTimeZoneCalculator","createAppointmentAdapter","getFormatType","formatDates","toMs","dateToMilliseconds","subscribes","isCurrentViewAgenda","option","currentViewUpdated","currentView","currentDateUpdated","date","getOption","name","getWorkspaceOption","getWorkSpace","isVirtualScrolling","setCellDataCacheAlias","appointment","geometry","_workSpace","isGroupedByDate","showAppointmentTooltip","options","targetedAppointment","getTargetedAppointment","data","target","hideAppointmentTooltip","showEditAppointmentPopup","targetedData","showAppointmentPopup","updateAppointmentAfterResize","info","dataAccessors","getAppointmentInfo","$appointment","exceptionDate","sourceAppointment","_checkRecurringAppointment","_updateAppointment","_appointments","moveAppointmentBack","bind","getUpdatedData","rawAppointment","_getUpdatedData","updateAppointmentAfterDrag","_ref","event","element","coordinates","_dataAccessors","key","targetedRawAppointment","source","newCellIndex","getDroppableCellIndex","oldCellIndex","getCellIndexByCoordinates","becomeAllDay","allDay","wasAllDay","movedBetweenAllDayAndSimple","supportAllDayRow","onDeleteButtonPress","checkAndDeleteAppointment","getTextAndFormatDate","appointmentRaw","targetedAppointmentRaw","format","appointmentAdapter","targetedAdapter","timeZoneCalculator","startDate","createDate","path","endDate","formatType","text","formatDate","_createAppointmentTitle","String","getResizableAppointmentArea","groups","_getCurrentViewOption","length","getLayoutManager","getRenderingStrategyInstance","_needHorizontalGroupBounds","horizontalGroupBounds","getGroupBounds","left","right","top","bottom","_needVerticalGroupBounds","_isVerticalGroupedWorkSpace","verticalGroupBounds","needRecalculateResizableArea","getAppointmentGeometry","settings","isAllDay","appointmentData","getDeltaTime","e","initialSize","itemData","getDropDownAppointmentWidth","_getViewCountConfig","intervalCount","getDropDownAppointmentHeight","getCellWidth","getCellHeight","getMaxAppointmentCountPerCellByType","_getMaxAppointmentCountPerCellByType","needCorrectAppointmentDates","getRenderingStrategyDirection","getDirection","updateAppointmentStartDate","firstViewDate","getStartViewDate","Date","startDayHour","updatedStartDate","appointmentTakesAllDay","normalizeDate","roundDateByStartDayHour","updateAppointmentEndDate","endDayHour","updatedEndDate","getHours","setHours","isSameDate","getMinutes","getTime","renderCompactAppointments","_compactAppointmentsHelper","render","clearCompactAppointments","clear","supportCompactDropDownAppointments","getGroupCount","_getGroupCount","mapAppointmentFields","config","itemElement","appointmentElement","targetedAppointmentData","dayHasAppointment","day","trimTime","_layoutManager","getAgendaVerticalStepHeight","getAgendaDuration","getEndViewDate","forceMaxAppointmentPerCell","onAgendaReady","rows","$appts","getAppointmentsInstance","_itemElements","total","applyClass","_","count","index","eq","addClass","i","getTimezone","_getTimezoneOffsetByOption","getTargetedAppointmentData","getEndDayHour","getStartDayHour","isAdaptive","removeDroppableCellClass"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/subscribes.js)\r\n * Version: 21.2.4\r\n * Build date: Mon Dec 06 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    isPlainObject\r\n} from \"../../core/utils/type\";\r\nimport dateUtils from \"../../core/utils/date\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    AGENDA_LAST_IN_DATE_APPOINTMENT_CLASS\r\n} from \"./classes\";\r\nimport {\r\n    utils\r\n} from \"./utils\";\r\nimport {\r\n    getTimeZoneCalculator\r\n} from \"./instanceFactory\";\r\nimport {\r\n    createAppointmentAdapter\r\n} from \"./appointmentAdapter\";\r\nimport {\r\n    getFormatType,\r\n    formatDates\r\n} from \"./appointments/textUtils\";\r\nvar toMs = dateUtils.dateToMilliseconds;\r\nvar subscribes = {\r\n    isCurrentViewAgenda: function() {\r\n        return \"agenda\" === this.option(\"currentView\")\r\n    },\r\n    currentViewUpdated: function(currentView) {\r\n        this.option(\"currentView\", currentView)\r\n    },\r\n    currentDateUpdated: function(date) {\r\n        this.option(\"currentDate\", date)\r\n    },\r\n    getOption: function(name) {\r\n        return this.option(name)\r\n    },\r\n    getWorkspaceOption: function(name) {\r\n        return this.getWorkSpace().option(name)\r\n    },\r\n    isVirtualScrolling: function() {\r\n        return this.isVirtualScrolling()\r\n    },\r\n    setCellDataCacheAlias: function(appointment, geometry) {\r\n        this._workSpace.setCellDataCacheAlias(appointment, geometry)\r\n    },\r\n    isGroupedByDate: function() {\r\n        return this.getWorkSpace().isGroupedByDate()\r\n    },\r\n    showAppointmentTooltip: function(options) {\r\n        var targetedAppointment = this.getTargetedAppointment(options.data, options.target);\r\n        this.showAppointmentTooltip(options.data, options.target, targetedAppointment)\r\n    },\r\n    hideAppointmentTooltip: function() {\r\n        this.hideAppointmentTooltip()\r\n    },\r\n    showEditAppointmentPopup: function(options) {\r\n        var targetedData = this.getTargetedAppointment(options.data, options.target);\r\n        this.showAppointmentPopup(options.data, false, targetedData)\r\n    },\r\n    updateAppointmentAfterResize: function(options) {\r\n        var info = utils.dataAccessors.getAppointmentInfo(options.$appointment);\r\n        var exceptionDate = info.sourceAppointment.exceptionDate;\r\n        this._checkRecurringAppointment(options.target, options.data, exceptionDate, function() {\r\n            this._updateAppointment(options.target, options.data, (function() {\r\n                this._appointments.moveAppointmentBack()\r\n            }))\r\n        }.bind(this))\r\n    },\r\n    getUpdatedData: function(rawAppointment) {\r\n        return this._getUpdatedData(rawAppointment)\r\n    },\r\n    updateAppointmentAfterDrag: function(_ref) {\r\n        var {\r\n            event: event,\r\n            element: element,\r\n            rawAppointment: rawAppointment,\r\n            coordinates: coordinates\r\n        } = _ref;\r\n        var info = utils.dataAccessors.getAppointmentInfo(element);\r\n        var appointment = createAppointmentAdapter(rawAppointment, this._dataAccessors, getTimeZoneCalculator(this.key));\r\n        var targetedAppointment = createAppointmentAdapter(extend({}, rawAppointment, this._getUpdatedData(rawAppointment)), this._dataAccessors, getTimeZoneCalculator(this.key));\r\n        var targetedRawAppointment = targetedAppointment.source();\r\n        var newCellIndex = this._workSpace.getDroppableCellIndex();\r\n        var oldCellIndex = this._workSpace.getCellIndexByCoordinates(coordinates);\r\n        var becomeAllDay = targetedAppointment.allDay;\r\n        var wasAllDay = appointment.allDay;\r\n        var movedBetweenAllDayAndSimple = this._workSpace.supportAllDayRow() && (wasAllDay && !becomeAllDay || !wasAllDay && becomeAllDay);\r\n        if (newCellIndex !== oldCellIndex || movedBetweenAllDayAndSimple) {\r\n            this._checkRecurringAppointment(rawAppointment, targetedRawAppointment, info.sourceAppointment.exceptionDate, function() {\r\n                this._updateAppointment(rawAppointment, targetedRawAppointment, (function() {\r\n                    this._appointments.moveAppointmentBack(event)\r\n                }), event)\r\n            }.bind(this), void 0, void 0, event)\r\n        } else {\r\n            this._appointments.moveAppointmentBack(event)\r\n        }\r\n    },\r\n    onDeleteButtonPress: function(options) {\r\n        var targetedData = this.getTargetedAppointment(options.data, $(options.target));\r\n        this.checkAndDeleteAppointment(options.data, targetedData);\r\n        this.hideAppointmentTooltip()\r\n    },\r\n    getTextAndFormatDate(appointmentRaw, targetedAppointmentRaw, format) {\r\n        var appointmentAdapter = createAppointmentAdapter(appointmentRaw, this._dataAccessors, getTimeZoneCalculator(this.key));\r\n        var targetedAdapter = createAppointmentAdapter(targetedAppointmentRaw || appointmentRaw, this._dataAccessors, getTimeZoneCalculator(this.key));\r\n        var timeZoneCalculator = getTimeZoneCalculator(this.key);\r\n        var startDate = timeZoneCalculator.createDate(targetedAdapter.startDate, {\r\n            path: \"toGrid\"\r\n        });\r\n        var endDate = timeZoneCalculator.createDate(targetedAdapter.endDate, {\r\n            path: \"toGrid\"\r\n        });\r\n        var formatType = format || getFormatType(startDate, endDate, targetedAdapter.allDay, \"month\" !== this.option(\"currentView\"));\r\n        return {\r\n            text: targetedAdapter.text || appointmentAdapter.text,\r\n            formatDate: formatDates(startDate, endDate, formatType)\r\n        }\r\n    },\r\n    _createAppointmentTitle(data) {\r\n        if (isPlainObject(data)) {\r\n            return data.text\r\n        }\r\n        return String(data)\r\n    },\r\n    getResizableAppointmentArea: function(options) {\r\n        var allDay = options.allDay;\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        if (groups && groups.length) {\r\n            if (allDay || this.getLayoutManager().getRenderingStrategyInstance()._needHorizontalGroupBounds()) {\r\n                var horizontalGroupBounds = this._workSpace.getGroupBounds(options.coordinates);\r\n                return {\r\n                    left: horizontalGroupBounds.left,\r\n                    right: horizontalGroupBounds.right,\r\n                    top: 0,\r\n                    bottom: 0\r\n                }\r\n            }\r\n            if (this.getLayoutManager().getRenderingStrategyInstance()._needVerticalGroupBounds(allDay) && this._workSpace._isVerticalGroupedWorkSpace()) {\r\n                var verticalGroupBounds = this._workSpace.getGroupBounds(options.coordinates);\r\n                return {\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: verticalGroupBounds.top,\r\n                    bottom: verticalGroupBounds.bottom\r\n                }\r\n            }\r\n        }\r\n    },\r\n    needRecalculateResizableArea: function() {\r\n        return this.getWorkSpace().needRecalculateResizableArea()\r\n    },\r\n    getAppointmentGeometry: function(settings) {\r\n        return this.getLayoutManager().getRenderingStrategyInstance().getAppointmentGeometry(settings)\r\n    },\r\n    isAllDay: function(appointmentData) {\r\n        return this.getLayoutManager().getRenderingStrategyInstance().isAllDay(appointmentData)\r\n    },\r\n    getDeltaTime: function(e, initialSize, itemData) {\r\n        return this.getLayoutManager().getRenderingStrategyInstance().getDeltaTime(e, initialSize, itemData)\r\n    },\r\n    getDropDownAppointmentWidth: function(isAllDay) {\r\n        return this.getLayoutManager().getRenderingStrategyInstance().getDropDownAppointmentWidth(this._getViewCountConfig().intervalCount, isAllDay)\r\n    },\r\n    getDropDownAppointmentHeight: function() {\r\n        return this.getLayoutManager().getRenderingStrategyInstance().getDropDownAppointmentHeight()\r\n    },\r\n    getCellWidth: function() {\r\n        return this.getWorkSpace().getCellWidth()\r\n    },\r\n    getCellHeight: function() {\r\n        return this.getWorkSpace().getCellHeight()\r\n    },\r\n    getMaxAppointmentCountPerCellByType: function(isAllDay) {\r\n        return this.getRenderingStrategyInstance()._getMaxAppointmentCountPerCellByType(isAllDay)\r\n    },\r\n    needCorrectAppointmentDates: function() {\r\n        return this.getRenderingStrategyInstance().needCorrectAppointmentDates()\r\n    },\r\n    getRenderingStrategyDirection: function() {\r\n        return this.getRenderingStrategyInstance().getDirection()\r\n    },\r\n    updateAppointmentStartDate: function(options) {\r\n        var appointment = options.appointment;\r\n        var firstViewDate = this._workSpace.getStartViewDate();\r\n        var startDate = new Date(options.startDate);\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var updatedStartDate;\r\n        if (this.appointmentTakesAllDay(appointment)) {\r\n            updatedStartDate = dateUtils.normalizeDate(startDate, firstViewDate)\r\n        } else {\r\n            if (startDate < firstViewDate) {\r\n                startDate = firstViewDate\r\n            }\r\n            updatedStartDate = dateUtils.normalizeDate(options.startDate, new Date(startDate))\r\n        }\r\n        return dateUtils.roundDateByStartDayHour(updatedStartDate, startDayHour)\r\n    },\r\n    updateAppointmentEndDate: function(options) {\r\n        var endDate = options.endDate;\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var updatedEndDate = endDate;\r\n        if (endDate.getHours() >= endDayHour) {\r\n            updatedEndDate.setHours(endDayHour, 0, 0, 0)\r\n        } else if (!options.isSameDate && startDayHour > 0 && 60 * endDate.getHours() + endDate.getMinutes() < 60 * startDayHour) {\r\n            updatedEndDate = new Date(updatedEndDate.getTime() - toMs(\"day\"));\r\n            updatedEndDate.setHours(endDayHour, 0, 0, 0)\r\n        }\r\n        return updatedEndDate\r\n    },\r\n    renderCompactAppointments: function(options) {\r\n        this._compactAppointmentsHelper.render(options)\r\n    },\r\n    clearCompactAppointments: function() {\r\n        this._compactAppointmentsHelper.clear()\r\n    },\r\n    supportCompactDropDownAppointments: function() {\r\n        return this.getLayoutManager().getRenderingStrategyInstance().supportCompactDropDownAppointments()\r\n    },\r\n    getGroupCount: function() {\r\n        return this._workSpace._getGroupCount()\r\n    },\r\n    mapAppointmentFields: function(config) {\r\n        var {\r\n            itemData: itemData,\r\n            itemElement: itemElement,\r\n            targetedAppointment: targetedAppointment\r\n        } = config;\r\n        var targetedData = targetedAppointment || this.getTargetedAppointment(itemData, itemElement);\r\n        return {\r\n            appointmentData: config.itemData,\r\n            appointmentElement: config.itemElement,\r\n            targetedAppointmentData: targetedData\r\n        }\r\n    },\r\n    dayHasAppointment: function(day, appointment, trimTime) {\r\n        return this.dayHasAppointment(day, appointment, trimTime)\r\n    },\r\n    getLayoutManager: function() {\r\n        return this._layoutManager\r\n    },\r\n    getAgendaVerticalStepHeight: function() {\r\n        return this.getWorkSpace().getAgendaVerticalStepHeight()\r\n    },\r\n    getAgendaDuration: function() {\r\n        return this._getCurrentViewOption(\"agendaDuration\")\r\n    },\r\n    getStartViewDate: function() {\r\n        return this.getStartViewDate()\r\n    },\r\n    getEndViewDate: function() {\r\n        return this.getEndViewDate()\r\n    },\r\n    forceMaxAppointmentPerCell: function() {\r\n        return this.forceMaxAppointmentPerCell()\r\n    },\r\n    onAgendaReady: function(rows) {\r\n        var $appts = this.getAppointmentsInstance()._itemElements();\r\n        var total = 0;\r\n        var applyClass = function(_, count) {\r\n            var index = count + total - 1;\r\n            $appts.eq(index).addClass(AGENDA_LAST_IN_DATE_APPOINTMENT_CLASS);\r\n            total += count\r\n        };\r\n        for (var i = 0; i < rows.length; i++) {\r\n            each(rows[i], applyClass)\r\n        }\r\n    },\r\n    getTimezone: function() {\r\n        return this._getTimezoneOffsetByOption()\r\n    },\r\n    getTargetedAppointmentData: function(appointment, element) {\r\n        return this.getTargetedAppointment(appointment, element)\r\n    },\r\n    getEndDayHour: function() {\r\n        return this._workSpace.option(\"endDayHour\") || this.option(\"endDayHour\")\r\n    },\r\n    getStartDayHour: function() {\r\n        return this._workSpace.option(\"startDayHour\") || this.option(\"startDayHour\")\r\n    },\r\n    isAdaptive: function() {\r\n        return this.option(\"adaptivityEnabled\")\r\n    },\r\n    removeDroppableCellClass: function() {\r\n        this._workSpace.removeDroppableCellClass()\r\n    }\r\n};\r\nexport default subscribes;\r\n"]},"metadata":{},"sourceType":"module"}