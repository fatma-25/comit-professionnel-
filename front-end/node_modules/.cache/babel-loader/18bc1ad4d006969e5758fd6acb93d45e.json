{"ast":null,"code":"var _jsxFileName = \"/Users/fatmaamara/Desktop/projetetude/authentification-main/front-end/src/components/views/ListContact.js\",\n    _s = $RefreshSig$();\n\n// import React, { useState } from \"react\";\n// import Search from \"../Search\";\n// import Contact from \"./Contact\";\n// const ListContact = () => {\n//   const [searchedName, setSearchedName] = useState(\"\");\n//   const searcheditem = (search) => {\n//     setSearchedName(search);\n//     console.log(searchedName);\n//   };\n//   return (\n//     <>\n//       <Search searcheditem={searcheditem} />\n//       <Contact searchedName={searchedName} />\n//     </>\n//   );\n// };\n// export default ListContact;\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\"; // import firebase from \"../../server/firebase\";\n\nimport firebase from \"../../server/firebase\";\nimport { Lookup, DropDownOptions } from \"devextreme-react/lookup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Item({\n  Picture,\n  Prefix,\n  FirstName,\n  LastName\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"custom-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: Picture\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: `${Prefix} ${Prefix} ${Prefix}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Item;\nconst searchExpression = [\"FirstName\", \"LastName\", \"Prefix\"];\n\nconst ListContact = props => {\n  _s();\n\n  const [usersState, setUsersState] = useState([]);\n  const [connectedUsersState, setConnectedUsersState] = useState([]);\n  const usersRef = firebase.database().ref(\"users\");\n  const connectedRef = firebase.database().ref(\".info/connected\");\n  const statusRef = firebase.database().ref(\"status\");\n  useEffect(() => {\n    usersRef.on(\"child_added\", snap => {\n      setUsersState(currentState => {\n        let updatedState = [...currentState];\n        let user = snap.val();\n        user.name = user.displayName;\n        user.email = user.email;\n        user.id = snap.key;\n        user.isPrivateChat = true;\n        updatedState.push(user);\n        return updatedState;\n      });\n    });\n    connectedRef.on(\"value\", snap => {\n      if (props.user && snap.val()) {\n        const userStatusRef = statusRef.child(props.user.uid);\n        userStatusRef.set(true);\n        userStatusRef.onDisconnect().remove();\n      }\n    });\n    return () => {\n      usersRef.off();\n      connectedRef.off();\n    };\n  }, [props.user]);\n  useEffect(() => {\n    statusRef.on(\"child_added\", snap => {\n      setConnectedUsersState(currentState => {\n        let updatedState = [...currentState];\n        updatedState.push(snap.key);\n        return updatedState;\n      });\n    });\n    statusRef.on(\"child_removed\", snap => {\n      setConnectedUsersState(currentState => {\n        let updatedState = [...currentState];\n        let index = updatedState.indexOf(snap.key);\n        updatedState.splice(index, 1);\n        return updatedState;\n      });\n    });\n    return () => statusRef.off();\n  }, [usersState]);\n\n  const getDisplayExpr = item => {\n    // return item ? `${item.email} ${item.email}` : \"\";\n    console.log(\"pssst\", item);\n  };\n\n  const displayUsers = () => {\n    if (usersState.length > 0) {\n      // return usersState\n      // .filter((user) => user.id !== props.user.uid)\n      // .map((user) => {\n      return (\n        /*#__PURE__*/\n        // <div\n        //   style={{\n        //     display: \"flex\",\n        //     justifyContent: \"space-around\",\n        //     marginBottom: 20,\n        //   }}\n        // >\n        //   <div>\n        //     {console.log(user, \"uuuuusre\")}\n        //     {user.name}\n        //   </div>\n        //   <div>\n        //     {/* {user.name}@SoftCommunity.com */}\n        //     {user.email}\n        //   </div>\n        // </div>\n        _jsxDEV(\"div\", {\n          className: \"dx-fieldset\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dx-fieldset-header\",\n            children: \"Custom Item Template\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dx-field\",\n            children: /*#__PURE__*/_jsxDEV(Lookup, {\n              items: usersState,\n              displayExpr: getDisplayExpr,\n              searchExpr: searchExpression,\n              valueExpr: \"ID\",\n              placeholder: \"Select employee\",\n              itemRender: Item,\n              children: /*#__PURE__*/_jsxDEV(DropDownOptions, {\n                title: \"Select employee\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }, this)\n      ); // });\n    }\n  }; // const selectUser = (user) => {\n  //   let userTemp = { ...user };\n  //   userTemp.id = generateChannelId(user.id);\n  //   setLastVisited(props.user, props.channel);\n  //   setLastVisited(props.user, userTemp);\n  //   props.selectChannel(userTemp);\n  // };\n  // const setLastVisited = (user, channel) => {\n  //   const lastVisited = usersRef\n  //     .child(user.uid)\n  //     .child(\"lastVisited\")\n  //     .child(channel.id);\n  //   lastVisited.set(firebase.database.ServerValue.TIMESTAMP);\n  //   lastVisited.onDisconnect().set(firebase.database.ServerValue.TIMESTAMP);\n  // };\n  // const generateChannelId = (userId) => {\n  //   if (props.user.uid < userId) {\n  //     return props.user.uid + userId;\n  //   } else {\n  //     return userId + props.user.uid;\n  //   }\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: displayUsers()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 10\n  }, this);\n};\n\n_s(ListContact, \"6U/V5/w1SKMexB1MZPyGIwXk8Wk=\");\n\n_c2 = ListContact;\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user.currentUser,\n    channel: state.channel.currentChannel\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {// selectChannel: (channel) => dispatch(setChannel(channel)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListContact); // import React from \"react\";\n// import { Lookup, DropDownOptions } from \"devextreme-react/lookup\";\n// // import { employees } from \"./data.js\";\n// // import Field from \"./Field.js\";\n// // import Item from \"./Item.js\";\n// function Item({ Picture, Prefix, FirstName, LastName }) {\n//   return (\n//     <div className=\"custom-item\">\n//       <img src={Picture} />\n//       <div>{`${Prefix} ${FirstName} ${LastName}`}</div>\n//     </div>\n//   );\n// }\n// const searchExpression = [\"FirstName\", \"LastName\", \"Prefix\"];\n// const employees = [\n//   {\n//     ID: 1,\n//     FirstName: \"John\",\n//     LastName: \"Heart\",\n//     Prefix: \"Mr.\",\n//     Position: \"CEO\",\n//     Picture: \"images/employees/01.png\",\n//     BirthDate: \"1964/03/16\",\n//     HireDate: \"1995/01/15\",\n//     Notes:\n//       \"John has been in the Audio/Video industry since 1990. He has led DevAv as its CEO since 2003.\\r\\n\\r\\nWhen not working hard as the CEO, John loves to golf and bowl. He once bowled a perfect game of 300.\",\n//     Address: \"351 S Hill St.\",\n//   },\n//   {\n//     ID: 2,\n//     FirstName: \"Olivia\",\n//     LastName: \"Peyton\",\n//     Prefix: \"Mrs.\",\n//     Position: \"Sales Assistant\",\n//     Picture: \"images/employees/09.png\",\n//     BirthDate: \"1981/06/03\",\n//     HireDate: \"2012/05/14\",\n//     Notes:\n//       \"Olivia loves to sell. She has been selling DevAV products since 2012. \\r\\n\\r\\nOlivia was homecoming queen in high school. She is expecting her first child in 6 months. Good Luck Olivia.\",\n//     Address: \"807 W Paseo Del Mar\",\n//   },\n//   {\n//     ID: 3,\n//     FirstName: \"Robert\",\n//     LastName: \"Reagan\",\n//     Prefix: \"Mr.\",\n//     Position: \"CMO\",\n//     Picture: \"images/employees/03.png\",\n//     BirthDate: \"1974/09/07\",\n//     HireDate: \"2002/11/08\",\n//     Notes:\n//       \"Robert was recently voted the CMO of the year by CMO Magazine. He is a proud member of the DevAV Management Team.\\r\\n\\r\\nRobert is a championship BBQ chef, so when you get the chance ask him for his secret recipe.\",\n//     Address: \"4 Westmoreland Pl.\",\n//   },\n//   {\n//     ID: 4,\n//     FirstName: \"Greta\",\n//     LastName: \"Sims\",\n//     Prefix: \"Ms.\",\n//     Position: \"HR Manager\",\n//     Picture: \"images/employees/04.png\",\n//     BirthDate: \"1977/11/22\",\n//     HireDate: \"1998/04/23\",\n//     Notes:\n//       \"Greta has been DevAV's HR Manager since 2003. She joined DevAV from Sonee Corp.\\r\\n\\r\\nGreta is currently training for the NYC marathon. Her best marathon time is 4 hours. Go Greta.\",\n//     Address: \"1700 S Grandview Dr.\",\n//   },\n//   {\n//     ID: 5,\n//     FirstName: \"Brett\",\n//     LastName: \"Wade\",\n//     Prefix: \"Mr.\",\n//     Position: \"IT Manager\",\n//     Picture: \"images/employees/05.png\",\n//     BirthDate: \"1968/12/01\",\n//     HireDate: \"2009/03/06\",\n//     Notes:\n//       \"Brett came to DevAv from Microsoft and has led our IT department since 2012.\\r\\n\\r\\nWhen he is not working hard for DevAV, he coaches Little League (he was a high school pitcher).\",\n//     Address: \"1120 Old Mill Rd.\",\n//   },\n//   {\n//     ID: 6,\n//     FirstName: \"Sandra\",\n//     LastName: \"Johnson\",\n//     Prefix: \"Mrs.\",\n//     Position: \"Controller\",\n//     Picture: \"images/employees/06.png\",\n//     BirthDate: \"1974/11/15\",\n//     HireDate: \"2005/05/11\",\n//     Notes:\n//       \"Sandra is a CPA and has been our controller since 2008. She loves to interact with staff so if you've not met her, be certain to say hi.\\r\\n\\r\\nSandra has 2 daughters both of whom are accomplished gymnasts.\",\n//     Address: \"4600 N Virginia Rd.\",\n//   },\n//   {\n//     ID: 7,\n//     FirstName: \"Kevin\",\n//     LastName: \"Carter\",\n//     Prefix: \"Mr.\",\n//     Position: \"Shipping Manager\",\n//     Picture: \"images/employees/07.png\",\n//     BirthDate: \"1978/01/09\",\n//     HireDate: \"2009/08/11\",\n//     Notes:\n//       \"Kevin is our hard-working shipping manager and has been helping that department work like clockwork for 18 months.\\r\\n\\r\\nWhen not in the office, he is usually on the basketball court playing pick-up games.\",\n//     Address: \"424 N Main St.\",\n//   },\n//   {\n//     ID: 8,\n//     FirstName: \"Cynthia\",\n//     LastName: \"Stanwick\",\n//     Prefix: \"Ms.\",\n//     Position: \"HR Assistant\",\n//     Picture: \"images/employees/08.png\",\n//     BirthDate: \"1985/06/05\",\n//     HireDate: \"2008/03/24\",\n//     Notes:\n//       \"Cindy joined us in 2008 and has been in the HR department for 2 years. \\r\\n\\r\\nShe was recently awarded employee of the month. Way to go Cindy!\",\n//     Address: \"2211 Bonita Dr.\",\n//   },\n//   {\n//     ID: 9,\n//     FirstName: \"Kent\",\n//     LastName: \"Samuelson\",\n//     Prefix: \"Dr.\",\n//     Position: \"Ombudsman\",\n//     Picture: \"images/employees/02.png\",\n//     BirthDate: \"1972/09/11\",\n//     HireDate: \"2009/04/22\",\n//     Notes:\n//       \"As our ombudsman, Kent is on the front-lines solving customer problems and helping our partners address issues out in the field.    He is a classically trained musician and is a member of the Chamber Orchestra.\",\n//     Address: \"12100 Mora Dr\",\n//   },\n// ];\n// class App extends React.Component {\n//   render() {\n//     return (\n//       <div>\n//         <div className=\"dx-fieldset\">\n//           <div className=\"dx-fieldset-header\">Custom Item Template</div>\n//           <div className=\"dx-field\">\n//             <Lookup\n//               items={employees}\n//               displayExpr={this.getDisplayExpr}\n//               searchExpr={searchExpression}\n//               valueExpr=\"ID\"\n//               placeholder=\"Select employee\"\n//               itemRender={Item}\n//             >\n//               <DropDownOptions title=\"Select employee\" />\n//             </Lookup>\n//           </div>\n//         </div>\n//       </div>\n//     );\n//   }\n//   getDisplayExpr(item) {\n//     return item ? `${item.FirstName} ${item.LastName}` : \"\";\n//   }\n// }\n// export default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Item\");\n$RefreshReg$(_c2, \"ListContact\");","map":{"version":3,"sources":["/Users/fatmaamara/Desktop/projetetude/authentification-main/front-end/src/components/views/ListContact.js"],"names":["React","useState","useEffect","connect","firebase","Lookup","DropDownOptions","Item","Picture","Prefix","FirstName","LastName","searchExpression","ListContact","props","usersState","setUsersState","connectedUsersState","setConnectedUsersState","usersRef","database","ref","connectedRef","statusRef","on","snap","currentState","updatedState","user","val","name","displayName","email","id","key","isPrivateChat","push","userStatusRef","child","uid","set","onDisconnect","remove","off","index","indexOf","splice","getDisplayExpr","item","console","log","displayUsers","length","mapStateToProps","state","currentUser","channel","currentChannel","mapDispatchToProps","dispatch"],"mappings":"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;AACjC,SAAO;AACL1B,IAAAA,IAAI,EAAE0B,KAAK,CAAC1B,IAAN,CAAW2B,WADZ;AAELC,IAAAA,OAAO,EAAEF,KAAK,CAACE,OAAN,CAAcC;AAFlB,GAAP;AAID,CALD;;AAOA,MAAMC,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO,CACL;AADK,GAAP;AAGD,CAJD;;AAMA,eAAexD,OAAO,CAACkD,eAAD,EAAkBK,kBAAlB,CAAP,CAA6C7C,WAA7C,CAAf,C,CAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA","sourcesContent":["// import React, { useState } from \"react\";\n\n// import Search from \"../Search\";\n// import Contact from \"./Contact\";\n// const ListContact = () => {\n//   const [searchedName, setSearchedName] = useState(\"\");\n\n//   const searcheditem = (search) => {\n//     setSearchedName(search);\n//     console.log(searchedName);\n//   };\n//   return (\n//     <>\n//       <Search searcheditem={searcheditem} />\n\n//       <Contact searchedName={searchedName} />\n//     </>\n//   );\n// };\n\n// export default ListContact;\n\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n// import firebase from \"../../server/firebase\";\nimport firebase from \"../../server/firebase\";\nimport { Lookup, DropDownOptions } from \"devextreme-react/lookup\";\n\nfunction Item({ Picture, Prefix, FirstName, LastName }) {\n  return (\n    <div className=\"custom-item\">\n      <img src={Picture} />\n      <div>{`${Prefix} ${Prefix} ${Prefix}`}</div>\n    </div>\n  );\n}\nconst searchExpression = [\"FirstName\", \"LastName\", \"Prefix\"];\nconst ListContact = (props) => {\n  const [usersState, setUsersState] = useState([]);\n\n  const [connectedUsersState, setConnectedUsersState] = useState([]);\n\n  const usersRef = firebase.database().ref(\"users\");\n\n  const connectedRef = firebase.database().ref(\".info/connected\");\n\n  const statusRef = firebase.database().ref(\"status\");\n\n  useEffect(() => {\n    usersRef.on(\"child_added\", (snap) => {\n      setUsersState((currentState) => {\n        let updatedState = [...currentState];\n\n        let user = snap.val();\n        user.name = user.displayName;\n        user.email = user.email;\n        user.id = snap.key;\n        user.isPrivateChat = true;\n        updatedState.push(user);\n\n        return updatedState;\n      });\n    });\n\n    connectedRef.on(\"value\", (snap) => {\n      if (props.user && snap.val()) {\n        const userStatusRef = statusRef.child(props.user.uid);\n        userStatusRef.set(true);\n        userStatusRef.onDisconnect().remove();\n      }\n    });\n\n    return () => {\n      usersRef.off();\n      connectedRef.off();\n    };\n  }, [props.user]);\n\n  useEffect(() => {\n    statusRef.on(\"child_added\", (snap) => {\n      setConnectedUsersState((currentState) => {\n        let updatedState = [...currentState];\n        updatedState.push(snap.key);\n        return updatedState;\n      });\n    });\n\n    statusRef.on(\"child_removed\", (snap) => {\n      setConnectedUsersState((currentState) => {\n        let updatedState = [...currentState];\n\n        let index = updatedState.indexOf(snap.key);\n        updatedState.splice(index, 1);\n        return updatedState;\n      });\n    });\n\n    return () => statusRef.off();\n  }, [usersState]);\n\n  const getDisplayExpr = (item) => {\n    // return item ? `${item.email} ${item.email}` : \"\";\n    console.log(\"pssst\", item);\n  };\n\n  const displayUsers = () => {\n    if (usersState.length > 0) {\n      // return usersState\n      // .filter((user) => user.id !== props.user.uid)\n      // .map((user) => {\n      return (\n        // <div\n        //   style={{\n        //     display: \"flex\",\n        //     justifyContent: \"space-around\",\n        //     marginBottom: 20,\n        //   }}\n        // >\n        //   <div>\n        //     {console.log(user, \"uuuuusre\")}\n        //     {user.name}\n        //   </div>\n        //   <div>\n        //     {/* {user.name}@SoftCommunity.com */}\n        //     {user.email}\n        //   </div>\n        // </div>\n\n        <div className=\"dx-fieldset\">\n          <div className=\"dx-fieldset-header\">Custom Item Template</div>\n          <div className=\"dx-field\">\n            <Lookup\n              items={usersState}\n              displayExpr={getDisplayExpr}\n              searchExpr={searchExpression}\n              valueExpr=\"ID\"\n              placeholder=\"Select employee\"\n              itemRender={Item}\n            >\n              <DropDownOptions title=\"Select employee\" />\n            </Lookup>\n          </div>\n        </div>\n      );\n      // });\n    }\n  };\n\n  // const selectUser = (user) => {\n  //   let userTemp = { ...user };\n  //   userTemp.id = generateChannelId(user.id);\n  //   setLastVisited(props.user, props.channel);\n  //   setLastVisited(props.user, userTemp);\n  //   props.selectChannel(userTemp);\n  // };\n\n  // const setLastVisited = (user, channel) => {\n  //   const lastVisited = usersRef\n  //     .child(user.uid)\n  //     .child(\"lastVisited\")\n  //     .child(channel.id);\n  //   lastVisited.set(firebase.database.ServerValue.TIMESTAMP);\n  //   lastVisited.onDisconnect().set(firebase.database.ServerValue.TIMESTAMP);\n  // };\n\n  // const generateChannelId = (userId) => {\n  //   if (props.user.uid < userId) {\n  //     return props.user.uid + userId;\n  //   } else {\n  //     return userId + props.user.uid;\n  //   }\n  // };\n\n  return <div>{displayUsers()}</div>;\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user.currentUser,\n    channel: state.channel.currentChannel,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    // selectChannel: (channel) => dispatch(setChannel(channel)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListContact);\n\n// import React from \"react\";\n// import { Lookup, DropDownOptions } from \"devextreme-react/lookup\";\n\n// // import { employees } from \"./data.js\";\n// // import Field from \"./Field.js\";\n// // import Item from \"./Item.js\";\n\n// function Item({ Picture, Prefix, FirstName, LastName }) {\n//   return (\n//     <div className=\"custom-item\">\n//       <img src={Picture} />\n//       <div>{`${Prefix} ${FirstName} ${LastName}`}</div>\n//     </div>\n//   );\n// }\n// const searchExpression = [\"FirstName\", \"LastName\", \"Prefix\"];\n// const employees = [\n//   {\n//     ID: 1,\n//     FirstName: \"John\",\n//     LastName: \"Heart\",\n//     Prefix: \"Mr.\",\n//     Position: \"CEO\",\n//     Picture: \"images/employees/01.png\",\n//     BirthDate: \"1964/03/16\",\n//     HireDate: \"1995/01/15\",\n//     Notes:\n//       \"John has been in the Audio/Video industry since 1990. He has led DevAv as its CEO since 2003.\\r\\n\\r\\nWhen not working hard as the CEO, John loves to golf and bowl. He once bowled a perfect game of 300.\",\n//     Address: \"351 S Hill St.\",\n//   },\n//   {\n//     ID: 2,\n//     FirstName: \"Olivia\",\n//     LastName: \"Peyton\",\n//     Prefix: \"Mrs.\",\n//     Position: \"Sales Assistant\",\n//     Picture: \"images/employees/09.png\",\n//     BirthDate: \"1981/06/03\",\n//     HireDate: \"2012/05/14\",\n//     Notes:\n//       \"Olivia loves to sell. She has been selling DevAV products since 2012. \\r\\n\\r\\nOlivia was homecoming queen in high school. She is expecting her first child in 6 months. Good Luck Olivia.\",\n//     Address: \"807 W Paseo Del Mar\",\n//   },\n//   {\n//     ID: 3,\n//     FirstName: \"Robert\",\n//     LastName: \"Reagan\",\n//     Prefix: \"Mr.\",\n//     Position: \"CMO\",\n//     Picture: \"images/employees/03.png\",\n//     BirthDate: \"1974/09/07\",\n//     HireDate: \"2002/11/08\",\n//     Notes:\n//       \"Robert was recently voted the CMO of the year by CMO Magazine. He is a proud member of the DevAV Management Team.\\r\\n\\r\\nRobert is a championship BBQ chef, so when you get the chance ask him for his secret recipe.\",\n//     Address: \"4 Westmoreland Pl.\",\n//   },\n//   {\n//     ID: 4,\n//     FirstName: \"Greta\",\n//     LastName: \"Sims\",\n//     Prefix: \"Ms.\",\n//     Position: \"HR Manager\",\n//     Picture: \"images/employees/04.png\",\n//     BirthDate: \"1977/11/22\",\n//     HireDate: \"1998/04/23\",\n//     Notes:\n//       \"Greta has been DevAV's HR Manager since 2003. She joined DevAV from Sonee Corp.\\r\\n\\r\\nGreta is currently training for the NYC marathon. Her best marathon time is 4 hours. Go Greta.\",\n//     Address: \"1700 S Grandview Dr.\",\n//   },\n//   {\n//     ID: 5,\n//     FirstName: \"Brett\",\n//     LastName: \"Wade\",\n//     Prefix: \"Mr.\",\n//     Position: \"IT Manager\",\n//     Picture: \"images/employees/05.png\",\n//     BirthDate: \"1968/12/01\",\n//     HireDate: \"2009/03/06\",\n//     Notes:\n//       \"Brett came to DevAv from Microsoft and has led our IT department since 2012.\\r\\n\\r\\nWhen he is not working hard for DevAV, he coaches Little League (he was a high school pitcher).\",\n//     Address: \"1120 Old Mill Rd.\",\n//   },\n//   {\n//     ID: 6,\n//     FirstName: \"Sandra\",\n//     LastName: \"Johnson\",\n//     Prefix: \"Mrs.\",\n//     Position: \"Controller\",\n//     Picture: \"images/employees/06.png\",\n//     BirthDate: \"1974/11/15\",\n//     HireDate: \"2005/05/11\",\n//     Notes:\n//       \"Sandra is a CPA and has been our controller since 2008. She loves to interact with staff so if you've not met her, be certain to say hi.\\r\\n\\r\\nSandra has 2 daughters both of whom are accomplished gymnasts.\",\n//     Address: \"4600 N Virginia Rd.\",\n//   },\n//   {\n//     ID: 7,\n//     FirstName: \"Kevin\",\n//     LastName: \"Carter\",\n//     Prefix: \"Mr.\",\n//     Position: \"Shipping Manager\",\n//     Picture: \"images/employees/07.png\",\n//     BirthDate: \"1978/01/09\",\n//     HireDate: \"2009/08/11\",\n//     Notes:\n//       \"Kevin is our hard-working shipping manager and has been helping that department work like clockwork for 18 months.\\r\\n\\r\\nWhen not in the office, he is usually on the basketball court playing pick-up games.\",\n//     Address: \"424 N Main St.\",\n//   },\n//   {\n//     ID: 8,\n//     FirstName: \"Cynthia\",\n//     LastName: \"Stanwick\",\n//     Prefix: \"Ms.\",\n//     Position: \"HR Assistant\",\n//     Picture: \"images/employees/08.png\",\n//     BirthDate: \"1985/06/05\",\n//     HireDate: \"2008/03/24\",\n//     Notes:\n//       \"Cindy joined us in 2008 and has been in the HR department for 2 years. \\r\\n\\r\\nShe was recently awarded employee of the month. Way to go Cindy!\",\n//     Address: \"2211 Bonita Dr.\",\n//   },\n//   {\n//     ID: 9,\n//     FirstName: \"Kent\",\n//     LastName: \"Samuelson\",\n//     Prefix: \"Dr.\",\n//     Position: \"Ombudsman\",\n//     Picture: \"images/employees/02.png\",\n//     BirthDate: \"1972/09/11\",\n//     HireDate: \"2009/04/22\",\n//     Notes:\n//       \"As our ombudsman, Kent is on the front-lines solving customer problems and helping our partners address issues out in the field.    He is a classically trained musician and is a member of the Chamber Orchestra.\",\n//     Address: \"12100 Mora Dr\",\n//   },\n// ];\n\n// class App extends React.Component {\n//   render() {\n//     return (\n//       <div>\n//         <div className=\"dx-fieldset\">\n//           <div className=\"dx-fieldset-header\">Custom Item Template</div>\n//           <div className=\"dx-field\">\n//             <Lookup\n//               items={employees}\n//               displayExpr={this.getDisplayExpr}\n//               searchExpr={searchExpression}\n//               valueExpr=\"ID\"\n//               placeholder=\"Select employee\"\n//               itemRender={Item}\n//             >\n//               <DropDownOptions title=\"Select employee\" />\n//             </Lookup>\n//           </div>\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   getDisplayExpr(item) {\n//     return item ? `${item.FirstName} ${item.LastName}` : \"\";\n//   }\n// }\n\n// export default App;\n"]},"metadata":{},"sourceType":"module"}