{"ast":null,"code":"var _jsxFileName = \"/Users/fatmaamara/Desktop/projetetude/authentification-main/front-end/src/components/SideBar/SideBar.component.jsx\",\n    _s = $RefreshSig$();\n\n// import React from 'react';\n// import { Menu } from 'semantic-ui-react';\n// import UserInfo from \"./UserInfo/UserInfo.component\";\n// import Channels from \"./Channels/Channels.component\";\n// import PrivateChat from \"./PrivateChat/PrivateChat.component\";\n// import FavouriteChannels from \"./FavouriteChannels/FavouriteChannels.component\";\n// import { Link, useHistory } from \"react-router-dom\";\n// // import { Nav, Navbar, Container, Button } from \"react-bootstrap\";\n// import \"./SideBar.css\";\n// export const SideBar = () => {\n//     return (<Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n//         <UserInfo />\n//         <FavouriteChannels />\n//         <Channels /> \n//         <PrivateChat />\n//   <div style={{display:\"flex\", flexDirection:\"column\"}}>\n//         <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/calendar\"\n//               >\n//                Calendar\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/listcontact\"\n//               >\n//                 List Contact\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/upload\"\n//               >\n//                 Upload\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/shared\"\n//               >\n//                 Shared Document\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/edit\"\n//               >\n//                 Edit Profile\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/ApprouveUser\"\n//               >\n//                 ApprouveUser\n//               </Link>\n//    </div>\n//     </Menu>\n//     )\n// }\n//****** */\n// import React, { useState, useEffect } from \"react\";\n// import { connect } from \"react-redux\";\n// // import firebase from \"../../server/firebase\";\n// import firebase from \"../../server/firebase\";\n// import { Menu } from 'semantic-ui-react';\n// import UserInfo from \"./UserInfo/UserInfo.component\";\n// import Channels from \"./Channels/Channels.component\";\n// import PrivateChat from \"./PrivateChat/PrivateChat.component\";\n// import FavouriteChannels from \"./FavouriteChannels/FavouriteChannels.component\";\n// import { Link, useHistory } from \"react-router-dom\";\n// import store from '../../index'\n// // import { Nav, Navbar, Container, Button } from \"react-bootstrap\";\n// import \"./SideBar.css\";\n// export const SideBar = (props) => {\n//   // if (!props.user) {\n//     const [usersState, setUsersState] = useState([]);\n//     const usersRef = firebase.database().ref(\"users\");\n//     return (\n//  <Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n//         <UserInfo />\n//         <FavouriteChannels />\n//        <Channels /> \n//         <PrivateChat />\n//   <div style={{display:\"flex\", flexDirection:\"column\"}}>\n//         <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/calendar\"\n//               >\n//                Calendar\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/listcontact\"\n//               >\n//                 List Contact\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/upload\"\n//               >\n//                 Upload\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/shared\"\n//               >\n//                 Shared Document\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/edit\"\n//               >\n//                 Edit Profile\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/ApprouveUser\"\n//               >\n//                 ApprouveUser\n//               </Link>\n//               <div>{console.log(store.getState().user.currentUser,'sttoore')}</div>\n//    </div>\n//     </Menu>\n//     )\n// }\n// const mapStateToProps = (state) => {\n// return {\n//     user: state.user.currentUser\n// }\n// }\n// connect(mapStateToProps)(SideBar);\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\"; // import firebase from \"../../server/firebase\";\n\nimport firebase from \"../../server/firebase\";\nimport { Menu, Icon } from 'semantic-ui-react';\nimport UserInfo from \"./UserInfo/UserInfo.component\";\nimport Channels from \"./Channels/Channels.component\";\nimport PrivateChat from \"./PrivateChat/PrivateChat.component\";\nimport FavouriteChannels from \"./FavouriteChannels/FavouriteChannels.component\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport store from '../../index'; // import { Nav, Navbar, Container, Button } from \"react-bootstrap\";\n\nimport \"./SideBar.css\";\nimport EditProfile from \"../views/EditProfile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SideBar = props => {\n  _s();\n\n  const [usersState, setUsersState] = useState([]);\n  const [connectedUsersState, setConnectedUsersState] = useState([]);\n  const usersRef = firebase.database().ref(\"users\");\n  const connectedRef = firebase.database().ref(\".info/connected\");\n  const statusRef = firebase.database().ref(\"status\");\n  useEffect(() => {\n    usersRef.on(\"child_added\", snap => {\n      setUsersState(currentState => {\n        let updatedState = [...currentState];\n        let user = snap.val();\n        user.name = user.displayName;\n        user.email = user.email;\n        user.status = user.status;\n        user.id = snap.key;\n        user.isPrivateChat = true;\n        updatedState.push(user);\n        return updatedState;\n      });\n    });\n    connectedRef.on(\"value\", snap => {\n      if (props.user && snap.val()) {\n        const userStatusRef = statusRef.child(props.user.uid);\n        userStatusRef.set(true);\n        userStatusRef.onDisconnect().remove();\n      }\n    });\n    return () => {\n      usersRef.off();\n      connectedRef.off();\n    };\n  }, [props.user]);\n  useEffect(() => {\n    statusRef.on(\"child_added\", snap => {\n      setConnectedUsersState(currentState => {\n        let updatedState = [...currentState];\n        updatedState.push(snap.key);\n        return updatedState;\n      });\n    });\n    statusRef.on(\"child_removed\", snap => {\n      setConnectedUsersState(currentState => {\n        let updatedState = [...currentState];\n        let index = updatedState.indexOf(snap.key);\n        updatedState.splice(index, 1);\n        return updatedState;\n      });\n    });\n    return () => statusRef.off();\n  }, [usersState]);\n\n  const displayUser = () => {\n    if (usersState.length > 0) {\n      return usersState.filter(user => user.id === store.getState().user.currentUser.uid).map(user => {\n        return user.status === false ? /*#__PURE__*/_jsxDEV(Menu, {\n          vertical: true,\n          fixed: \"left\",\n          borderless: true,\n          size: \"large\",\n          className: \"side_bar\",\n          children: /*#__PURE__*/_jsxDEV(UserInfo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this) : user.account === \"admin\" ? /*#__PURE__*/_jsxDEV(Menu, {\n          vertical: true,\n          fixed: \"left\",\n          borderless: true,\n          size: \"large\",\n          className: \"side_bar\",\n          children: [/*#__PURE__*/_jsxDEV(UserInfo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n            style: {\n              fontSize: '17px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              style: {\n                color: \"#B4B4B9\",\n                textDecoration: \"none\"\n              },\n              to: \"/ApprouveUser\",\n              children: [/*#__PURE__*/_jsxDEV(Icon, {\n                name: \"edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 3\n              }, this), \"          ApprouveUser\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 1\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 1\n        }, this) : /*#__PURE__*/_jsxDEV(Menu, {\n          vertical: true,\n          fixed: \"left\",\n          borderless: true,\n          size: \"large\",\n          className: \"side_bar\",\n          children: [/*#__PURE__*/_jsxDEV(UserInfo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Channels, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(PrivateChat, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(EditProfile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 9\n          }, this), console.log(user.status, \"ppppp\"), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n              style: {\n                fontSize: '17px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  color: \"#B4B4B9\",\n                  textDecoration: \"none\"\n                },\n                to: \"/calendar\",\n                children: [/*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"calendar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 16\n                }, this), \"   Calendar\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 3\n            }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n              style: {\n                fontSize: '17px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  color: \"#B4B4B9\",\n                  textDecoration: \"none\"\n                },\n                to: \"/listcontact\",\n                children: [/*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"list\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 16\n                }, this), \"    List Contact\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n              style: {\n                fontSize: '17px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  color: \"#B4B4B9\",\n                  textDecoration: \"none\"\n                },\n                to: \"/upload\",\n                children: [/*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 16\n                }, this), \"      Upload\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n              style: {\n                fontSize: '17px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  color: \"#B4B4B9\",\n                  textDecoration: \"none\"\n                },\n                to: \"/shared\",\n                children: [/*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"share\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 16\n                }, this), \"          Shared Document\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: console.log(store.getState().user.currentUser, 'sttoore')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 15\n        }, this);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: displayUser()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 10\n  }, this);\n};\n\n_s(SideBar, \"6U/V5/w1SKMexB1MZPyGIwXk8Wk=\");\n\n_c = SideBar;\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user.currentUser,\n    channel: state.channel.currentChannel\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {// selectChannel: (channel) => dispatch(setChannel(channel)),\n  };\n};\n\nconnect(mapStateToProps, mapDispatchToProps)(SideBar);\n\nvar _c;\n\n$RefreshReg$(_c, \"SideBar\");","map":{"version":3,"sources":["/Users/fatmaamara/Desktop/projetetude/authentification-main/front-end/src/components/SideBar/SideBar.component.jsx"],"names":["React","useState","useEffect","connect","firebase","Menu","Icon","UserInfo","Channels","PrivateChat","FavouriteChannels","Link","useHistory","store","EditProfile","SideBar","props","usersState","setUsersState","connectedUsersState","setConnectedUsersState","usersRef","database","ref","connectedRef","statusRef","on","snap","currentState","updatedState","user","val","name","displayName","email","status","id","key","isPrivateChat","push","userStatusRef","child","uid","set","onDisconnect","remove","off","index","indexOf","splice","displayUser","length","filter","getState","currentUser","map","account","fontSize","color","textDecoration","console","log","display","flexDirection","mapStateToProps","state","channel","currentChannel","mapDispatchToProps","dispatch"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB,C,CACA;;AACA,OAAOC,QAAP,MAAqB,uBAArB;AAEA,SAAQC,IAAR,EAAcC,IAAd,QAA2B,mBAA3B;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,WAAP,MAAwB,qCAAxB;AACA,OAAOC,iBAAP,MAA8B,iDAA9B;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,KAAP,MAAkB,aAAlB,C,CACA;;AACA,OAAO,eAAP;AACA,OAAOC,WAAP,MAAwB,sBAAxB;;AAEA,OAAO,MAAMC,OAAO,GAAIC,KAAD,IAAW;AAAA;;AAChC,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,EAAD,CAA5C;AAEA,QAAM,CAACkB,mBAAD,EAAsBC,sBAAtB,IAAgDnB,QAAQ,CAAC,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","sourcesContent":["// import React from 'react';\n// import { Menu } from 'semantic-ui-react';\n// import UserInfo from \"./UserInfo/UserInfo.component\";\n// import Channels from \"./Channels/Channels.component\";\n// import PrivateChat from \"./PrivateChat/PrivateChat.component\";\n// import FavouriteChannels from \"./FavouriteChannels/FavouriteChannels.component\";\n// import { Link, useHistory } from \"react-router-dom\";\n// // import { Nav, Navbar, Container, Button } from \"react-bootstrap\";\n// import \"./SideBar.css\";\n\n// export const SideBar = () => {\n//     return (<Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n//         <UserInfo />\n//         <FavouriteChannels />\n//         <Channels /> \n//         <PrivateChat />\n//   <div style={{display:\"flex\", flexDirection:\"column\"}}>\n//         <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/calendar\"\n//               >\n//                Calendar\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/listcontact\"\n//               >\n//                 List Contact\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/upload\"\n//               >\n//                 Upload\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/shared\"\n//               >\n//                 Shared Document\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/edit\"\n//               >\n//                 Edit Profile\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/ApprouveUser\"\n//               >\n//                 ApprouveUser\n//               </Link>\n//    </div>\n//     </Menu>\n//     )\n// }\n\n\n\n//****** */\n\n// import React, { useState, useEffect } from \"react\";\n// import { connect } from \"react-redux\";\n// // import firebase from \"../../server/firebase\";\n// import firebase from \"../../server/firebase\";\n\n// import { Menu } from 'semantic-ui-react';\n// import UserInfo from \"./UserInfo/UserInfo.component\";\n// import Channels from \"./Channels/Channels.component\";\n// import PrivateChat from \"./PrivateChat/PrivateChat.component\";\n// import FavouriteChannels from \"./FavouriteChannels/FavouriteChannels.component\";\n// import { Link, useHistory } from \"react-router-dom\";\n// import store from '../../index'\n// // import { Nav, Navbar, Container, Button } from \"react-bootstrap\";\n// import \"./SideBar.css\";\n\n// export const SideBar = (props) => {\n//   // if (!props.user) {\n//     const [usersState, setUsersState] = useState([]);\n//     const usersRef = firebase.database().ref(\"users\");\n\n//     return (\n \n//  <Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n//         <UserInfo />\n//         <FavouriteChannels />\n//        <Channels /> \n//         <PrivateChat />\n//   <div style={{display:\"flex\", flexDirection:\"column\"}}>\n//         <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/calendar\"\n//               >\n//                Calendar\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/listcontact\"\n//               >\n//                 List Contact\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/upload\"\n//               >\n//                 Upload\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/shared\"\n//               >\n//                 Shared Document\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/edit\"\n//               >\n//                 Edit Profile\n//               </Link>\n//               <Link\n//                 style={{ color: \"white\", textDecoration: \"none\" }}\n//                 to=\"/ApprouveUser\"\n//               >\n//                 ApprouveUser\n//               </Link>\n//               <div>{console.log(store.getState().user.currentUser,'sttoore')}</div>\n//    </div>\n//     </Menu>\n//     )\n\n\n\n\n// }\n\n// const mapStateToProps = (state) => {\n// return {\n//     user: state.user.currentUser\n// }\n// }\n\n// connect(mapStateToProps)(SideBar);\n\n\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n// import firebase from \"../../server/firebase\";\nimport firebase from \"../../server/firebase\";\n\nimport {Menu, Icon, } from 'semantic-ui-react'\nimport UserInfo from \"./UserInfo/UserInfo.component\";\nimport Channels from \"./Channels/Channels.component\";\nimport PrivateChat from \"./PrivateChat/PrivateChat.component\";\nimport FavouriteChannels from \"./FavouriteChannels/FavouriteChannels.component\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport store from '../../index'\n// import { Nav, Navbar, Container, Button } from \"react-bootstrap\";\nimport \"./SideBar.css\";\nimport EditProfile from \"../views/EditProfile\";\n\nexport const SideBar = (props) => {\n  const [usersState, setUsersState] = useState([]);\n\n  const [connectedUsersState, setConnectedUsersState] = useState([]);\n\n  const usersRef = firebase.database().ref(\"users\");\n\n  const connectedRef = firebase.database().ref(\".info/connected\");\n\n  const statusRef = firebase.database().ref(\"status\");\n\n  useEffect(() => {\n    usersRef.on(\"child_added\", (snap) => {\n      setUsersState((currentState) => {\n        let updatedState = [...currentState];\n\n        let user = snap.val();\n        user.name = user.displayName;\n        user.email = user.email;\n        user.status = user.status;\n        user.id = snap.key;\n        user.isPrivateChat = true;\n        updatedState.push(user);\n\n        return updatedState;\n      });\n    });\n\n    connectedRef.on(\"value\", (snap) => {\n      if (props.user && snap.val()) {\n        const userStatusRef = statusRef.child(props.user.uid);\n        userStatusRef.set(true);\n        userStatusRef.onDisconnect().remove();\n      }\n    });\n\n    return () => {\n      usersRef.off();\n      connectedRef.off();\n    };\n  }, [props.user]);\n\n  useEffect(() => {\n    statusRef.on(\"child_added\", (snap) => {\n      setConnectedUsersState((currentState) => {\n        let updatedState = [...currentState];\n        updatedState.push(snap.key);\n        return updatedState;\n      });\n    });\n\n    statusRef.on(\"child_removed\", (snap) => {\n      setConnectedUsersState((currentState) => {\n        let updatedState = [...currentState];\n\n        let index = updatedState.indexOf(snap.key);\n        updatedState.splice(index, 1);\n        return updatedState;\n      });\n    });\n\n    return () => statusRef.off();\n  }, [usersState]);\n\n  const displayUser = () => {\n    if (usersState.length > 0) {\n      return usersState\n        .filter((user) => user.id === store.getState().user.currentUser.uid)\n        .map((user) => {\n          return (\n            user.status === false ?\n\n            <Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n               \n            <UserInfo />\n            </Menu>\n\n: user.account === \"admin\" ?\n<Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n               \n<UserInfo />\n<Menu.Item style={{ fontSize: '17px' }}>\n<Link\n   style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n   to=\"/ApprouveUser\"\n >\n  <Icon name=\"edit\" />          ApprouveUser\n </Link>\n\n</Menu.Item>\n</Menu>\n:\n\n\n\n\n\n\n\n          (   <Menu vertical fixed=\"left\" borderless size=\"large\" className=\"side_bar\">\n               \n        <UserInfo />\n        {/* <FavouriteChannels /> */}\n       <Channels /> \n        <PrivateChat />\n        <EditProfile />\n        {console.log(user.status,\"ppppp\")}\n  <div style={{display:\"flex\", flexDirection:\"column\"}}>\n  <Menu.Item style={{ fontSize: '17px' }}>\n             <Link\n                style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n                to=\"/calendar\"\n              >\n               <Icon name=\"calendar\" />   Calendar\n              </Link>\n    \n        </Menu.Item>\n        <Menu.Item style={{ fontSize: '17px' }}>\n             <Link\n                style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n                to=\"/listcontact\"\n              >\n               <Icon name=\"list\" />    List Contact\n              </Link>\n    \n        </Menu.Item>\n        <Menu.Item style={{ fontSize: '17px' }}>\n             <Link\n                style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n                to=\"/upload\"\n              >\n               <Icon name=\"upload\" />      Upload\n              </Link>\n    \n        </Menu.Item>\n        <Menu.Item style={{ fontSize: '17px' }}>\n             <Link\n                style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n                to=\"/shared\"\n              >\n               <Icon name=\"share\" />          Shared Document\n              </Link>\n    \n        </Menu.Item>\n   \n        {/* <Menu.Item style={{ fontSize: '17px' }}>\n             <Link\n                style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n                to=\"/edit\"\n              >\n               <Icon name=\"edit\" />           Edit Profile\n              </Link>\n    \n        </Menu.Item> */}\n   \n\n        {/* { user.account === \"admin\" && \n           <Menu.Item style={{ fontSize: '17px' }}>\n           <Link\n              style={{ color: \"#B4B4B9\", textDecoration: \"none\" }}\n              to=\"/ApprouveUser\"\n            >\n             <Icon name=\"edit\" />          ApprouveUser\n            </Link>\n  \n      </Menu.Item>\n              }  */}\n\n\n\n        {/* <Link\n                style={{ color: \"white\", textDecoration: \"none\" }}\n                to=\"/calendar\"\n              >\n               Calendar\n              </Link>\n              <Link\n                style={{ color: \"white\", textDecoration: \"none\" }}\n                to=\"/listcontact\"\n              >\n                List Contact\n              </Link>\n              <Link\n                style={{ color: \"white\", textDecoration: \"none\" }}\n                to=\"/upload\"\n              >\n                Upload\n              </Link>\n              <Link\n                style={{ color: \"white\", textDecoration: \"none\" }}\n                to=\"/shared\"\n              >\n                Shared Document\n              </Link>\n              <Link\n                style={{ color: \"white\", textDecoration: \"none\" }}\n                to=\"/edit\"\n              >\n                Edit Profile\n              </Link>\n\n             { user.account === \"admin\" && <Link\n                style={{ color: \"white\", textDecoration: \"none\" }}\n                to=\"/ApprouveUser\"\n              >\n                ApprouveUser\n              </Link>\n              } */}\n\n              <div>{console.log(store.getState().user.currentUser,'sttoore')}</div>\n   </div>\n    </Menu>)\n          );\n        });\n    }\n  };\n\n  return <div>{displayUser()}</div>;\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user.currentUser,\n    channel: state.channel.currentChannel,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    // selectChannel: (channel) => dispatch(setChannel(channel)),\n  };\n};\n\nconnect(mapStateToProps, mapDispatchToProps)(SideBar);\n"]},"metadata":{},"sourceType":"module"}