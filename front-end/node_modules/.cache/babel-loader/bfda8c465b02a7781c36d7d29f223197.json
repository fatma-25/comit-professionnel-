{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js)\r\n * Version: 21.2.4\r\n * Build date: Mon Dec 06 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Button from \"../../button\";\nimport { FunctionTemplate } from \"../../../core/templates/function_template\";\nimport $ from \"../../../core/renderer\";\nimport List from \"../../list/ui.list.edit\";\nvar TOOLTIP_APPOINTMENT_ITEM = \"dx-tooltip-appointment-item\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT = TOOLTIP_APPOINTMENT_ITEM + \"-content\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT = TOOLTIP_APPOINTMENT_ITEM + \"-content-subject\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE = TOOLTIP_APPOINTMENT_ITEM + \"-content-date\";\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER = TOOLTIP_APPOINTMENT_ITEM + \"-marker\";\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY = TOOLTIP_APPOINTMENT_ITEM + \"-marker-body\";\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button-container\";\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button\";\nexport class TooltipStrategyBase {\n  constructor(options) {\n    this._tooltip = null;\n    this._options = options;\n    this._extraOptions = null;\n  }\n\n  show(target, dataList, extraOptions) {\n    if (this._canShowTooltip(dataList)) {\n      this.hide();\n      this._extraOptions = extraOptions;\n\n      this._showCore(target, dataList);\n    }\n  }\n\n  _showCore(target, dataList) {\n    if (!this._tooltip) {\n      this._tooltip = this._createTooltip(target, dataList);\n    } else {\n      this._shouldUseTarget() && this._tooltip.option(\"target\", target);\n\n      this._list.option(\"dataSource\", dataList);\n    }\n\n    this._prepareBeforeVisibleChanged(dataList);\n\n    this._tooltip.option(\"visible\", true);\n  }\n\n  _prepareBeforeVisibleChanged(dataList) {}\n\n  _getContentTemplate(dataList) {\n    return container => {\n      var listElement = $(\"<div>\");\n      $(container).append(listElement);\n      this._list = this._createList(listElement, dataList);\n    };\n  }\n\n  isAlreadyShown(target) {\n    if (this._tooltip && this._tooltip.option(\"visible\")) {\n      return this._tooltip.option(\"target\")[0] === target[0];\n    }\n  }\n\n  _onShown() {\n    this._list.option(\"focusStateEnabled\", this._extraOptions.focusStateEnabled);\n  }\n\n  dispose() {}\n\n  hide() {\n    if (this._tooltip) {\n      this._tooltip.option(\"visible\", false);\n    }\n  }\n\n  _shouldUseTarget() {\n    return true;\n  }\n\n  _createTooltip() {}\n\n  _canShowTooltip(dataList) {\n    if (!dataList.length) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _createListOption(dataList) {\n    return {\n      dataSource: dataList,\n      onContentReady: this._onListRender.bind(this),\n      onItemClick: e => this._onListItemClick(e),\n      itemTemplate: (item, index) => this._renderTemplate(item.appointment, item.targetedAppointment, index, item.color),\n      _swipeEnabled: false\n    };\n  }\n\n  _onListRender() {}\n\n  _createTooltipElement(wrapperClass) {\n    return $(\"<div>\").appendTo(this._options.container).addClass(wrapperClass);\n  }\n\n  _createList(listElement, dataList) {\n    return this._options.createComponent(listElement, List, this._createListOption(dataList));\n  }\n\n  _renderTemplate(appointment, targetedAppointment, index, color) {\n    var itemListContent = this._createItemListContent(appointment, targetedAppointment, color);\n\n    this._options.addDefaultTemplates({\n      [this._getItemListTemplateName()]: new FunctionTemplate(options => {\n        var $container = $(options.container);\n        $container.append(itemListContent);\n        return $container;\n      })\n    });\n\n    var template = this._options.getAppointmentTemplate(this._getItemListTemplateName() + \"Template\");\n\n    return this._createFunctionTemplate(template, appointment, targetedAppointment, index);\n  }\n\n  _createFunctionTemplate(template, data, targetData, index) {\n    var isEmptyDropDownAppointmentTemplate = this._isEmptyDropDownAppointmentTemplate();\n\n    return new FunctionTemplate(options => template.render({\n      model: isEmptyDropDownAppointmentTemplate ? {\n        appointmentData: data,\n        targetedAppointmentData: targetData\n      } : data,\n      container: options.container,\n      index: index\n    }));\n  }\n\n  _getItemListTemplateName() {\n    return this._isEmptyDropDownAppointmentTemplate() ? \"appointmentTooltip\" : \"dropDownAppointment\";\n  }\n\n  _isEmptyDropDownAppointmentTemplate() {\n    return !this._extraOptions.dropDownAppointmentTemplate || \"dropDownAppointment\" === this._extraOptions.dropDownAppointmentTemplate;\n  }\n\n  _onListItemClick(e) {\n    this.hide();\n    this._extraOptions.clickEvent && this._extraOptions.clickEvent(e);\n\n    this._options.showAppointmentPopup(e.itemData.appointment, false, e.itemData.targetedAppointment);\n  }\n\n  _createItemListContent(appointment, targetedAppointment, color) {\n    var editing = this._extraOptions.editing;\n    var $itemElement = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM);\n    $itemElement.append(this._createItemListMarker(color));\n    $itemElement.append(this._createItemListInfo(this._options.createFormattedDateText(appointment, targetedAppointment)));\n\n    var disabled = this._options.getAppointmentDisabled(appointment);\n\n    if (!disabled && (editing && true === editing.allowDeleting || true === editing)) {\n      $itemElement.append(this._createDeleteButton(appointment, targetedAppointment));\n    }\n\n    return $itemElement;\n  }\n\n  _createItemListMarker(color) {\n    var $marker = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER);\n    var $markerBody = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY);\n    $marker.append($markerBody);\n    color && color.done(value => $markerBody.css(\"background\", value));\n    return $marker;\n  }\n\n  _createItemListInfo(object) {\n    var result = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT);\n    var $title = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT).text(object.text);\n    var $date = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE).text(object.formatDate);\n    return result.append($title).append($date);\n  }\n\n  _createDeleteButton(appointment, targetedAppointment) {\n    var $container = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER);\n    var $deleteButton = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON);\n    $container.append($deleteButton);\n\n    this._options.createComponent($deleteButton, Button, {\n      icon: \"trash\",\n      stylingMode: \"text\",\n      onClick: e => {\n        this.hide();\n        e.event.stopPropagation();\n\n        this._options.checkAndDeleteAppointment(appointment, targetedAppointment);\n      }\n    });\n\n    return $container;\n  }\n\n}","map":{"version":3,"sources":["/Users/fatmaamara/Desktop/projetetude/authentification-main/front-end/node_modules/devextreme/esm/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js"],"names":["Button","FunctionTemplate","$","List","TOOLTIP_APPOINTMENT_ITEM","TOOLTIP_APPOINTMENT_ITEM_CONTENT","TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT","TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE","TOOLTIP_APPOINTMENT_ITEM_MARKER","TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY","TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER","TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON","TooltipStrategyBase","constructor","options","_tooltip","_options","_extraOptions","show","target","dataList","extraOptions","_canShowTooltip","hide","_showCore","_createTooltip","_shouldUseTarget","option","_list","_prepareBeforeVisibleChanged","_getContentTemplate","container","listElement","append","_createList","isAlreadyShown","_onShown","focusStateEnabled","dispose","length","_createListOption","dataSource","onContentReady","_onListRender","bind","onItemClick","e","_onListItemClick","itemTemplate","item","index","_renderTemplate","appointment","targetedAppointment","color","_swipeEnabled","_createTooltipElement","wrapperClass","appendTo","addClass","createComponent","itemListContent","_createItemListContent","addDefaultTemplates","_getItemListTemplateName","$container","template","getAppointmentTemplate","_createFunctionTemplate","data","targetData","isEmptyDropDownAppointmentTemplate","_isEmptyDropDownAppointmentTemplate","render","model","appointmentData","targetedAppointmentData","dropDownAppointmentTemplate","clickEvent","showAppointmentPopup","itemData","editing","$itemElement","_createItemListMarker","_createItemListInfo","createFormattedDateText","disabled","getAppointmentDisabled","allowDeleting","_createDeleteButton","$marker","$markerBody","done","value","css","object","result","$title","text","$date","formatDate","$deleteButton","icon","stylingMode","onClick","event","stopPropagation","checkAndDeleteAppointment"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js)\r\n * Version: 21.2.4\r\n * Build date: Mon Dec 06 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Button from \"../../button\";\r\nimport {\r\n    FunctionTemplate\r\n} from \"../../../core/templates/function_template\";\r\nimport $ from \"../../../core/renderer\";\r\nimport List from \"../../list/ui.list.edit\";\r\nvar TOOLTIP_APPOINTMENT_ITEM = \"dx-tooltip-appointment-item\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT = TOOLTIP_APPOINTMENT_ITEM + \"-content\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT = TOOLTIP_APPOINTMENT_ITEM + \"-content-subject\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE = TOOLTIP_APPOINTMENT_ITEM + \"-content-date\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER = TOOLTIP_APPOINTMENT_ITEM + \"-marker\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY = TOOLTIP_APPOINTMENT_ITEM + \"-marker-body\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button-container\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button\";\r\nexport class TooltipStrategyBase {\r\n    constructor(options) {\r\n        this._tooltip = null;\r\n        this._options = options;\r\n        this._extraOptions = null\r\n    }\r\n    show(target, dataList, extraOptions) {\r\n        if (this._canShowTooltip(dataList)) {\r\n            this.hide();\r\n            this._extraOptions = extraOptions;\r\n            this._showCore(target, dataList)\r\n        }\r\n    }\r\n    _showCore(target, dataList) {\r\n        if (!this._tooltip) {\r\n            this._tooltip = this._createTooltip(target, dataList)\r\n        } else {\r\n            this._shouldUseTarget() && this._tooltip.option(\"target\", target);\r\n            this._list.option(\"dataSource\", dataList)\r\n        }\r\n        this._prepareBeforeVisibleChanged(dataList);\r\n        this._tooltip.option(\"visible\", true)\r\n    }\r\n    _prepareBeforeVisibleChanged(dataList) {}\r\n    _getContentTemplate(dataList) {\r\n        return container => {\r\n            var listElement = $(\"<div>\");\r\n            $(container).append(listElement);\r\n            this._list = this._createList(listElement, dataList)\r\n        }\r\n    }\r\n    isAlreadyShown(target) {\r\n        if (this._tooltip && this._tooltip.option(\"visible\")) {\r\n            return this._tooltip.option(\"target\")[0] === target[0]\r\n        }\r\n    }\r\n    _onShown() {\r\n        this._list.option(\"focusStateEnabled\", this._extraOptions.focusStateEnabled)\r\n    }\r\n    dispose() {}\r\n    hide() {\r\n        if (this._tooltip) {\r\n            this._tooltip.option(\"visible\", false)\r\n        }\r\n    }\r\n    _shouldUseTarget() {\r\n        return true\r\n    }\r\n    _createTooltip() {}\r\n    _canShowTooltip(dataList) {\r\n        if (!dataList.length) {\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n    _createListOption(dataList) {\r\n        return {\r\n            dataSource: dataList,\r\n            onContentReady: this._onListRender.bind(this),\r\n            onItemClick: e => this._onListItemClick(e),\r\n            itemTemplate: (item, index) => this._renderTemplate(item.appointment, item.targetedAppointment, index, item.color),\r\n            _swipeEnabled: false\r\n        }\r\n    }\r\n    _onListRender() {}\r\n    _createTooltipElement(wrapperClass) {\r\n        return $(\"<div>\").appendTo(this._options.container).addClass(wrapperClass)\r\n    }\r\n    _createList(listElement, dataList) {\r\n        return this._options.createComponent(listElement, List, this._createListOption(dataList))\r\n    }\r\n    _renderTemplate(appointment, targetedAppointment, index, color) {\r\n        var itemListContent = this._createItemListContent(appointment, targetedAppointment, color);\r\n        this._options.addDefaultTemplates({\r\n            [this._getItemListTemplateName()]: new FunctionTemplate(options => {\r\n                var $container = $(options.container);\r\n                $container.append(itemListContent);\r\n                return $container\r\n            })\r\n        });\r\n        var template = this._options.getAppointmentTemplate(this._getItemListTemplateName() + \"Template\");\r\n        return this._createFunctionTemplate(template, appointment, targetedAppointment, index)\r\n    }\r\n    _createFunctionTemplate(template, data, targetData, index) {\r\n        var isEmptyDropDownAppointmentTemplate = this._isEmptyDropDownAppointmentTemplate();\r\n        return new FunctionTemplate(options => template.render({\r\n            model: isEmptyDropDownAppointmentTemplate ? {\r\n                appointmentData: data,\r\n                targetedAppointmentData: targetData\r\n            } : data,\r\n            container: options.container,\r\n            index: index\r\n        }))\r\n    }\r\n    _getItemListTemplateName() {\r\n        return this._isEmptyDropDownAppointmentTemplate() ? \"appointmentTooltip\" : \"dropDownAppointment\"\r\n    }\r\n    _isEmptyDropDownAppointmentTemplate() {\r\n        return !this._extraOptions.dropDownAppointmentTemplate || \"dropDownAppointment\" === this._extraOptions.dropDownAppointmentTemplate\r\n    }\r\n    _onListItemClick(e) {\r\n        this.hide();\r\n        this._extraOptions.clickEvent && this._extraOptions.clickEvent(e);\r\n        this._options.showAppointmentPopup(e.itemData.appointment, false, e.itemData.targetedAppointment)\r\n    }\r\n    _createItemListContent(appointment, targetedAppointment, color) {\r\n        var editing = this._extraOptions.editing;\r\n        var $itemElement = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM);\r\n        $itemElement.append(this._createItemListMarker(color));\r\n        $itemElement.append(this._createItemListInfo(this._options.createFormattedDateText(appointment, targetedAppointment)));\r\n        var disabled = this._options.getAppointmentDisabled(appointment);\r\n        if (!disabled && (editing && true === editing.allowDeleting || true === editing)) {\r\n            $itemElement.append(this._createDeleteButton(appointment, targetedAppointment))\r\n        }\r\n        return $itemElement\r\n    }\r\n    _createItemListMarker(color) {\r\n        var $marker = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER);\r\n        var $markerBody = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY);\r\n        $marker.append($markerBody);\r\n        color && color.done(value => $markerBody.css(\"background\", value));\r\n        return $marker\r\n    }\r\n    _createItemListInfo(object) {\r\n        var result = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT);\r\n        var $title = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT).text(object.text);\r\n        var $date = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE).text(object.formatDate);\r\n        return result.append($title).append($date)\r\n    }\r\n    _createDeleteButton(appointment, targetedAppointment) {\r\n        var $container = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER);\r\n        var $deleteButton = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON);\r\n        $container.append($deleteButton);\r\n        this._options.createComponent($deleteButton, Button, {\r\n            icon: \"trash\",\r\n            stylingMode: \"text\",\r\n            onClick: e => {\r\n                this.hide();\r\n                e.event.stopPropagation();\r\n                this._options.checkAndDeleteAppointment(appointment, targetedAppointment)\r\n            }\r\n        });\r\n        return $container\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}